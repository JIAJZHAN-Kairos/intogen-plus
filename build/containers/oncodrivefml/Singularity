Bootstrap: docker
From: python:3

%environment
    export BBGLAB_HOME=/oncodrivefml

%runscript

%setup
    mkdir ${SINGULARITY_ROOTFS}/oncodrivefml
    cp oncodrivefml_v2.conf ${SINGULARITY_ROOTFS}/oncodrivefml/
    chmod -R a+rx ${SINGULARITY_ROOTFS}/oncodrivefml/

%post

    # Install OncodriveFML
    # TODO make appropriate releases
    # TODO oncodrive check to update bokeh version to 2
    pip --no-cache-dir install https://bitbucket.org/bgframework/bgconfig/get/develop.tar.gz
    pip --no-cache-dir install https://bitbucket.org/bbglab/oncodrivefml/get/test.tar.gz
